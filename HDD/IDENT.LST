.MAIN.	MACRO V05.06R Thursday 22-Aug-19 09:22  Page 1


      1
      2						.MCALL	.PRINT
      3
      4		000207 				RET	= RETURN
      5		161120 				id.buff  = 161120	;  data buffer
      6		161122 				id.err	 = id.buff+2	;  wr. precomp cyl.
      7		161124 				id.scnt  = id.buff+4	;  Sector count rg.
      8		161126 				id.snum  = id.buff+6	;  Sector number rg.
      9		161130 				id.cnlo  = id.buff+10	;  Cylinder addr lo.
     10		161132 				id.cnhi  = id.buff+12	;  Cylinder addr hi.
     11		161134 				id.sdh	 = id.buff+14	;  Sector:Disk:Head
     12		161136 				id.csr	 = id.buff+16	;  Command & status reg
     13		161114 				id.irq	 = 161114	;  interrupt, 4th bit of the head number
     14									;   and software reset
     15	000000	004767 	000126 		START:	CALL	WAIT
     16	000004	012767 	000354 	161136'		MOV	#354,ID.CSR
     17	000012	004767 	000114 			CALL	WAIT
     18	000016	012700 	000624'			MOV	#BLOCK,R0
     19	000022	012701 	161120 			MOV	#ID.BUFF,R1
     20	000026	012702 	000100 			MOV	#100,R2
     21	000032	011120 			10$:	MOV	(R1),(R0)+
     22	000034	011120 				MOV	(R1),(R0)+
     23	000036	011120 				MOV	(R1),(R0)+
     24	000040	011120 				MOV	(R1),(R0)+
     25	000042	077205 				SOB	R2,10$
     26	000044	012701 	000624'			MOV	#BLOCK,R1
     27	000050	012702 	003026'			MOV	#TXTBUF,R2
     28	000054	012703 	000344'			MOV	#ATAB,R3
     29	000060	005713 			20$:	TST	(R3)
     30	000062	001416 				BEQ	30$
     31	000064	012300 				MOV	(R3)+,R0
     32	000066	004767 	000170 			CALL	MOVSTR
     33	000072	112722 	000072 			MOVB	#':,(R2)+
     34	000076	112722 	000040 			MOVB	#40,(R2)+
     35	000102	004733 				CALL	@(R3)+
     36	000104	112722 	000015 			MOVB	#15,(R2)+
     37	000110	112722 	000012 			MOVB	#12,(R2)+
     38	000114	062301 				ADD	(R3)+,R1
     39	000116	000760 				BR	20$
     40	000120	105022 			30$:	CLRB	(R2)+
     41	000122					.PRINT	#TXTOUT
     42	000130	104350 				EMT	350
     43
     44	000132	016700 	161136'		WAIT:	MOV	ID.CSR,R0
     45	000136	042700 	177457 			BIC	#^C320,R0
     46	000142	022700 	000120 			CMP	#120,R0
     47	000146	001371 				BNE	WAIT
     48	000150	000207 				RET
     49
     50	000152	012300 			OUTA:	MOV	(R3)+,R0
     51	000154	010167 	000406 			MOV	R1,QQ
     52	000160	000321 			10$:	SWAB	(R1)+
     53	000162	077002 				SOB	R0,10$
     54	000164	105777 	000376 			TSTB	@QQ
     55	000170	001003 				BNE	20$
     56	000172	012700 	001641'			MOV	#NSPEC,R0
     57	000176	000431 				BR	MOVSTR
.MAIN.	MACRO V05.06R Thursday 22-Aug-19 09:22  Page 1-1


     58	000200	011146 			20$:	MOV	(R1),-(SP)
     59	000202	105011 				CLRB	(R1)
     60	000204	016700 	000356 			MOV	QQ,R0
     61	000210	004767 	000046 			CALL	MOVSTR
     62	000214	012611 				MOV	(SP)+,(R1)
     63	000216	000207 				RET
     64
     65	000220	010546 			OUTD:	MOV	R5,-(SP)
     66	000222	012105 				MOV	(R1)+,R5
     67	000224	010146 				MOV	R1,-(SP)
     68	000226	012701 	001640'			MOV	#DECBUF,R1
     69	000232	012700 	000012 			MOV	#10.,R0
     70	000236	005004 			10$:	CLR	R4
     71	000240	071400 				DIV	R0,R4
     72	000242	062705 	000060 			ADD	#60,R5
     73	000246	110541 				MOVB	R5,-(R1)
     74	000250	010405 				MOV	R4,R5
     75	000252	001371 				BNE	10$
     76	000254	010100 				MOV	R1,R0
     77	000256	012601 				MOV	(SP)+,R1
     78	000260	012605 				MOV	(SP)+,R5
     79	000262	105710 			MOVSTR:	TSTB	(R0)
     80	000264	001402 				BEQ	10$
     81	000266	112022 				MOVB	(R0)+,(R2)+
     82	000270	000774 				BR	MOVSTR
     83	000272	000207 			10$:	RET
     84
     85	000274	012100 			SP1:	MOV	(R1)+,R0
     86	000276	072023 				ASH	(R3)+,R0
     87	000300	042300 				BIC	(R3)+,R0
     88	000302	006300 				ASL	R0
     89	000304	062300 				ADD	(R3)+,R0
     90	000306	011000 				MOV	(R0),R0
     91	000310	000764 				BR	MOVSTR
     92
     93	000312	011100 			SP2:	MOV	(R1),R0
     94	000314	001407 				BEQ	10$
     95	000316	105061 	000001 			CLRB	1(R1)
     96	000322	004767 	177672 			CALL	OUTD
     97	000326	012700 	001675'			MOV	#NSEC,R0
     98	000332	000753 				BR	MOVSTR
     99	000334	005721 			10$:	TST	(R1)+
    100	000336	012700 	001657'			MOV	#NSUP,R0
    101	000342	000747 				BR	MOVSTR
    102
    103	000344	002125'	000274'	177773 	ATAB:	SMC,SP1,-5.,^C1,DWSUP,-2
	000352	177776 	000600'	177776
    104	000360	002102'	000274'	177770 		DTR,SP1,-8.,^C7,DTRS,0
	000366	177770 	000604'	000000
    105	000374	002162'	000220'	000002 		CYL,OUTD,2
    106	000402	002206'	000220'	000000 		HEAD,OUTD,0
    107	000410	002226'	000220'	000000 		BPTR,OUTD,0
    108	000416	002262'	000220'	000000 		BPS,OUTD,0
    109	000424	002317'	000220'	000006 		SPT,OUTD,6
    110	000432	002341'	000152'	000012 		SN,OUTA,10.,0
	000440	000000
    111	000442	002357'	000274'	000000 		BT,SP1,0,^C3,BTS,0
.MAIN.	MACRO V05.06R Thursday 22-Aug-19 09:22  Page 1-2


	000450	177774 	000570'	000000
    112	000456	002373'	000220'	000000 		BS,OUTD,0
    113	000464	002422'	000220'	000000 		NECCB,OUTD,0
    114	000472	002446'	000152'	000004 		FWV,OUTA,4,0
	000500	000000
    115	000502	002467'	000152'	000024 		MN,OUTA,20.,0
	000510	000000
    116	000512	002504'	000312'	000000 		RWMC,SP2,0
    117	000520	002532'	000274'	000000 		DWIO,SP1,0,^C1,DWSUP,0
	000526	177776 	000600'	000000
    118	000534	002552'	000274'	177770 		DMAS,SP1,-8.,^C1,DWSUP,2
	000542	177776 	000600'	000002
    119	000550	002556'	000220'	000000 		PIOM,OUTD,0
    120	000556	002622'	000220'	000000 		DMAM,OUTD,0
    121	000564	000000 				HALT
    122
    123	000566	000000 			QQ:	HALT
    124	000570	001641'	001706'	001756'	BTS:	NSPEC,SPSS,DPMS,DPMSCH
	000576	001742'
    125	000600	001657'	001663'		DWSUP:	NSUP,SUP
    126	000604	002064'	002025'	002025'	DTRS:	DTR5,DTR510,DTR510,DTR10,DTR10,DTR10,DTR10,DTR10
	000612	002007'	002007'	002007'
	000620	002007'	002007'
    127	000624				BLOCK:	.BLKW	400
    128	001624					.BLKB	14
    129	001640	   000 			DECBUF:	.BYTE	0
    130	001641	   156 	   157 	   164 	NSPEC:	.ASCIZ	"not specified"
	001644	   040 	   163 	   160
	001647	   145 	   143 	   151
	001652	   146 	   151 	   145
	001655	   144 	   000
    131	001657	   156 	   157 	   164 	NSUP:	.ASCII	"not "
	001662	   040
    132	001663	   163 	   165 	   160 	SUP:	.ASCIZ	"supported"
	001666	   160 	   157 	   162
	001671	   164 	   145 	   144
	001674	   000
    133	001675	   040 	   163 	   145 	NSEC:	.ASCIZ	" sectors"
	001700	   143 	   164 	   157
	001703	   162 	   163 	   000
    134	001706	   163 	   151 	   156 	SPSS:	.ASCIZ	"single ported single sector"
	001711	   147 	   154 	   145
	001714	   040 	   160 	   157
	001717	   162 	   164 	   145
	001722	   144 	   040 	   163
	001725	   151 	   156 	   147
	001730	   154 	   145 	   040
	001733	   163 	   145 	   143
	001736	   164 	   157 	   162
	001741	   000
    135	001742	   162 	   145 	   141 	DPMSCH:	.ASCII	"read cached "
	001745	   144 	   040 	   143
	001750	   141 	   143 	   150
	001753	   145 	   144 	   040
    136	001756	   144 	   165 	   141 	DPMS:	.ASCIZ	"dual ported multi sector"
	001761	   154 	   040 	   160
	001764	   157 	   162 	   164
.MAIN.	MACRO V05.06R Thursday 22-Aug-19 09:22  Page 1-3


	001767	   145 	   144 	   040
	001772	   155 	   165 	   154
	001775	   164 	   151 	   040
	002000	   163 	   145 	   143
	002003	   164 	   157 	   162
	002006	   000
    137	002007	   076 	   040 	   061 	DTR10:	.ASCIZ	"> 10 Mbit/sec"
	002012	   060 	   040 	   115
	002015	   142 	   151 	   164
	002020	   057 	   163 	   145
	002023	   143 	   000
    138	002025	   076 	   040 	   065 	DTR510:	.ASCIZ	"> 5Mbit/sec but <= 10 Mbit/sec"
	002030	   115 	   142 	   151
	002033	   164 	   057 	   163
	002036	   145 	   143 	   040
	002041	   142 	   165 	   164
	002044	   040 	   074 	   075
	002047	   040 	   061 	   060
	002052	   040 	   115 	   142
	002055	   151 	   164 	   057
	002060	   163 	   145 	   143
	002063	   000
    139	002064	   074 	   075 	   040 	DTR5:	.ASCIZ	"<= 5 Mbit/sec"
	002067	   065 	   040 	   115
	002072	   142 	   151 	   164
	002075	   057 	   163 	   145
	002100	   143 	   000
    140	002102	   104 	   151 	   163 	DTR:	.ASCIZ	"Disk transfer rate"
	002105	   153 	   040 	   164
	002110	   162 	   141 	   156
	002113	   163 	   146 	   145
	002116	   162 	   040 	   162
	002121	   141 	   164 	   145
	002124	   000
    141	002125	   123 	   160 	   151 	SMC:	.ASCIZ	"Spindle motor control option"
	002130	   156 	   144 	   154
	002133	   145 	   040 	   155
	002136	   157 	   164 	   157
	002141	   162 	   040 	   143
	002144	   157 	   156 	   164
	002147	   162 	   157 	   154
	002152	   040 	   157 	   160
	002155	   164 	   151 	   157
	002160	   156 	   000
    142	002162	   116 	   165 	   155 	CYL:	.ASCIZ	"Number of cylinders"
	002165	   142 	   145 	   162
	002170	   040 	   157 	   146
	002173	   040 	   143 	   171
	002176	   154 	   151 	   156
	002201	   144 	   145 	   162
	002204	   163 	   000
    143	002206	   116 	   165 	   155 	HEAD:	.ASCIZ	"Number of heads"
	002211	   142 	   145 	   162
	002214	   040 	   157 	   146
	002217	   040 	   150 	   145
	002222	   141 	   144 	   163
	002225	   000
.MAIN.	MACRO V05.06R Thursday 22-Aug-19 09:22  Page 1-4


    144	002226	   125 	   156 	   146 	BPTR:	.ASCIZ	"Unformatted bytes per track"
	002231	   157 	   162 	   155
	002234	   141 	   164 	   164
	002237	   145 	   144 	   040
	002242	   142 	   171 	   164
	002245	   145 	   163 	   040
	002250	   160 	   145 	   162
	002253	   040 	   164 	   162
	002256	   141 	   143 	   153
	002261	   000
    145	002262	   125 	   156 	   146 	BPS:	.ASCIZ	"Unformatted bytes per sector"
	002265	   157 	   162 	   155
	002270	   141 	   164 	   164
	002273	   145 	   144 	   040
	002276	   142 	   171 	   164
	002301	   145 	   163 	   040
	002304	   160 	   145 	   162
	002307	   040 	   163 	   145
	002312	   143 	   164 	   157
	002315	   162 	   000
    146	002317	   123 	   145 	   143 	SPT:	.ASCIZ	"Sectors per track"
	002322	   164 	   157 	   162
	002325	   163 	   040 	   160
	002330	   145 	   162 	   040
	002333	   164 	   162 	   141
	002336	   143 	   153 	   000
    147	002341	   123 	   145 	   162 	SN:	.ASCIZ	"Serial number"
	002344	   151 	   141 	   154
	002347	   040 	   156 	   165
	002352	   155 	   142 	   145
	002355	   162 	   000
    148	002357	   102 	   165 	   146 	BT:	.ASCIZ	"Buffer type"
	002362	   146 	   145 	   162
	002365	   040 	   164 	   171
	002370	   160 	   145 	   000
    149	002373	   102 	   165 	   146 	BS:	.ASCIZ	"Buffer size in sectors"
	002376	   146 	   145 	   162
	002401	   040 	   163 	   151
	002404	   172 	   145 	   040
	002407	   151 	   156 	   040
	002412	   163 	   145 	   143
	002415	   164 	   157 	   162
	002420	   163 	   000
    150	002422	   116 	   165 	   155 	NECCB:	.ASCIZ	"Number of ECC bytes"
	002425	   142 	   145 	   162
	002430	   040 	   157 	   146
	002433	   040 	   105 	   103
	002436	   103 	   040 	   142
	002441	   171 	   164 	   145
	002444	   163 	   000
    151	002446	   106 	   151 	   162 	FWV:	.ASCIZ	"Firmware version"
	002451	   155 	   167 	   141
	002454	   162 	   145 	   040
	002457	   166 	   145 	   162
	002462	   163 	   151 	   157
	002465	   156 	   000
    152	002467	   115 	   157 	   144 	MN:	.ASCIZ	"Model number"
.MAIN.	MACRO V05.06R Thursday 22-Aug-19 09:22  Page 1-5


	002472	   145 	   154 	   040
	002475	   156 	   165 	   155
	002500	   142 	   145 	   162
	002503	   000
    153	002504	   122 	   057 	   127 	RWMC:	.ASCIZ	"R/W multiple commands"
	002507	   040 	   155 	   165
	002512	   154 	   164 	   151
	002515	   160 	   154 	   145
	002520	   040 	   143 	   157
	002523	   155 	   155 	   141
	002526	   156 	   144 	   163
	002531	   000
    154	002532	   104 	   157 	   165 	DWIO:	.ASCIZ	"Double word I/O"
	002535	   142 	   154 	   145
	002540	   040 	   167 	   157
	002543	   162 	   144 	   040
	002546	   111 	   057 	   117
	002551	   000
    155	002552	   104 	   115 	   101 	DMAS:	.ASCIZ	"DMA"
	002555	   000
    156	002556	   120 	   111 	   117 	PIOM:	.ASCIZ	"PIO data transfer cycle timing mode"
	002561	   040 	   144 	   141
	002564	   164 	   141 	   040
	002567	   164 	   162 	   141
	002572	   156 	   163 	   146
	002575	   145 	   162 	   040
	002600	   143 	   171 	   143
	002603	   154 	   145 	   040
	002606	   164 	   151 	   155
	002611	   151 	   156 	   147
	002614	   040 	   155 	   157
	002617	   144 	   145 	   000
    157	002622	   104 	   115 	   101 	DMAM:	.ASCIZ	"DMA data transfer cycle timing mode"
	002625	   040 	   144 	   141
	002630	   164 	   141 	   040
	002633	   164 	   162 	   141
	002636	   156 	   163 	   146
	002641	   145 	   162 	   040
	002644	   143 	   171 	   143
	002647	   154 	   145 	   040
	002652	   164 	   151 	   155
	002655	   151 	   156 	   147
	002660	   040 	   155 	   157
	002663	   144 	   145 	   000
    158	002666	   015 	   012 		TXTOUT:	.BYTE	15,12
    159	002670	   055 	   055 	   055 		.ASCII	"--- IDE drive identify information table: ---"<15><12>
	002673	   040 	   111 	   104
	002676	   105 	   040 	   144
	002701	   162 	   151 	   166
	002704	   145 	   040 	   151
	002707	   144 	   145 	   156
	002712	   164 	   151 	   146
	002715	   171 	   040 	   151
	002720	   156 	   146 	   157
	002723	   162 	   155 	   141
	002726	   164 	   151 	   157
	002731	   156 	   040 	   164
.MAIN.	MACRO V05.06R Thursday 22-Aug-19 09:22  Page 1-6


	002734	   141 	   142 	   154
	002737	   145 	   072 	   040
	002742	   055 	   055 	   055
	002745	   015 	   012
    160	002747	   055 	   055 	   055 		.ASCII	"---------------------------------------------"<15><12>
	002752	   055 	   055 	   055
	002755	   055 	   055 	   055
	002760	   055 	   055 	   055
	002763	   055 	   055 	   055
	002766	   055 	   055 	   055
	002771	   055 	   055 	   055
	002774	   055 	   055 	   055
	002777	   055 	   055 	   055
	003002	   055 	   055 	   055
	003005	   055 	   055 	   055
	003010	   055 	   055 	   055
	003013	   055 	   055 	   055
	003016	   055 	   055 	   055
	003021	   055 	   055 	   055
	003024	   015 	   012
    161	003026				TXTBUF:
    162		000000'				.END	START
.MAIN.	MACRO V05.06R Thursday 22-Aug-19 09:22  Page 1-7
Symbol table

ATAB    000344R  	DPMS    001756R  	ID.BUF= 161120   	NECCB   002422R  	SN      002341R
BLOCK   000624R  	DPMSCH  001742R  	ID.CNH= 161132   	NSEC    001675R  	SPSS    001706R
BPS     002262R  	DTR     002102R  	ID.CNL= 161130   	NSPEC   001641R  	SPT     002317R
BPTR    002226R  	DTRS    000604R  	ID.CSR= 161136   	NSUP    001657R  	SP1     000274R
BS      002373R  	DTR10   002007R  	ID.ERR= 161122   	OUTA    000152R  	SP2     000312R
BT      002357R  	DTR5    002064R  	ID.IRQ= 161114   	OUTD    000220R  	START   000000R
BTS     000570R  	DTR510  002025R  	ID.SCN= 161124   	PIOM    002556R  	SUP     001663R
CYL     002162R  	DWIO    002532R  	ID.SDH= 161134   	QQ      000566R  	TXTBUF  003026R
DECBUF  001640R  	DWSUP   000600R  	ID.SNU= 161126   	RET   = 000207   	TXTOUT  002666R
DMAM    002622R  	FWV     002446R  	MN      002467R  	RWMC    002504R  	WAIT    000132R
DMAS    002552R  	HEAD    002206R  	MOVSTR  000262R  	SMC     002125R  	...V1 = 000003


. ABS.	000000    000	(RW,I,GBL,ABS,OVR)
      	003026    001	(RW,I,LCL,REL,CON)
Errors detected:  0

*** Assembler statistics


Work  file  reads: 0
Work  file writes: 0
Size of work file: 10744 Words  ( 42 Pages)
Size of core pool: 16640 Words  ( 65 Pages)
Operating  system: RT-11

Elapsed time: 00:00:00.04
DK:IDENT,DK:IDENT=DK:IDENT

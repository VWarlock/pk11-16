	  14. Календарь/часы
							  13.09.90

     Эмулятор календаря и часов обеспечивает настройку и индикацию 
даты и времени на экране ПЭВМ (под управлением оконной системы).

     После  запуска  процесса─эмулятора   на   экране   появляется 
"окошко", в котором индицируется следующая информация (например):

  ┌────────────────────────────────┐
  │ SUN 05─Aug─91 13:22:46  #12345 │
  └────────────────────────────────┘

     Для  того,  чтобы  установить  новые  показания,   необходимо 
эмулятор переключить в режим настройки. Для этого нужно нажать  на 
клавиатуре "УПР+ТАБ". При этом в окошке с календарем реверсируется 
одно из полей (готовое для модификации). Выход из режима настройки 
с новыми значениями выполняется повторным  нажатием  "УПР+ТАБ".  В 
режиме настройки используются следующие клавиши:

   ←,→	  ─ перемещение с одного модифицируемого поля на другое;

   ↓,↑	  ─ увеличивает или уменьшает значение поля.

     Эмулятор обслуживает один	регистр  177110  (CLKREG).  Данный
регистр используется для управления процессом в  режиме  настройки 
(в том числе и для переключения в режим настройки).
     Засылка в этот регистр  восьмеричной  константы  570  вызовет 
занесение  в  циклический  буфер   клавиатуры   команд   монитора, 
выполняющих установку в операционной  системе  даты  и  времени  в 
соответствии текущими показаниями календаря.
    В комплект поставки ВПО входит утилита DATTIM.SAV, выполняющая
это действие. Исходный текст этой программы имеет следующий вид:

	  .title    DatTim
	       CLKREG	 ═    177110
     start:
	       mov  #570,     @#CLKREG
	       clr  pc
     .end      start

     Аналогичного эффекта можно добиться, если в режиме  настройки 
нажать на клавиатуре "Shift+УПР+ТАБ".

     Если в регистр CLKREG заслать восьмеричную константу  177777,
то по адресу, содержащемуся в r0, эмулятор вернет текстовую строку
длиной 22 байта, например: "SUN 05─Aug─91 13:22:46".

.MAIN.	MACRO V05.06R Friday 30-Nov-18 09:49
Table of contents

    2- 462	common definitions for bios monitor
.MAIN.	MACRO V05.06R Friday 30-Nov-18 09:49  Page 1


      1					.enabl  lc
      2					.enabl	ama
      3					.enabl  gbl
      4					.mcall	.push,.pop
.MAIN.	MACRO V05.06R Friday 30-Nov-18 09:49  Page 3
Common definitions for bios monitor

      2
.MAIN.	MACRO V05.06R Friday 30-Nov-18 09:49  Page 4
Common definitions for bios monitor

      1		174100 			        dc1buf  == 174100
      2		174102 			        dc2buf  == 174102
      3		174104 			        dc3buf  == 174104
      4		142400 				$$map	= 142400
      5		000050 				$$len	= 40.
      6					;------------------------------------------------
      7	000000				vdpini::					;
      8	000000	012737 	000446'	154100 		mov	#dc1,	<dc1buf & 7777> + l.rda	;
      9	000006	012737 	000466'	154102 		mov	#dc2,	<dc2buf & 7777> + l.rda	;
     10	000014	012737 	000552'	154104 		mov	#dc3,	<dc3buf & 7777> + l.rda	;
     11					;------------------------------------------------
     12	000022	012702 	000000G			mov	#vdtbl,	r2	;
     13	000026	012703 	140000 			mov	#140000,r3	;
     14	000032	012223 				mov	(r2)+,	(r3)+	;0
     15	000034	012223 				mov	(r2)+,	(r3)+	;2
     16	000036	022323 				cmp	(r3)+,	(r3)+	;4,6
     17	000040	012223 				mov	(r2)+,	(r3)+	;10
     18	000042	022323 				cmp	(r3)+,	(r3)+	;12,14
     19	000044	012223 				mov	(r2)+,	(r3)+	;16
     20					;--------------------------------
     21	000046	062703 	000100 			add	#16.*4, r3	;
     22	000052	012704 	000011 			mov	#9.,	r4	;
     23	000056				10$:				;
     24	000056	012223 				mov	(r2)+,	(r3)+	; tas
     25	000060	005023 				clr	(r3)+		;
     26	000062	077403 				sob	r4,	10$	;
     27					;--------------------------------
     28	000064	012703 	142300 			mov	#142300,r3	;
     29	000070	012704 	000007 			mov	#7,	r4	;
     30	000074				20$:				;
     31	000074	005023 				clr	(r3)+		;
     32	000076	012723 	137020 			mov	#137020,(r3)+	;
     33	000102	012223 				mov	(r2)+,	(r3)+	; tao
     34	000104	012723 	001000 			mov	#1000,	(r3)+	;
     35	000110	077407 				sob	r4,	20$	;
     36	000112	012704 	000017 			mov	#15.,	r4	;
     37	000116	113703 	000015 			movb	15,	r3	;
     38	000122	004737 	000134'			call	dc0		;
     39	000126	005304 				dec	r4		;
     40	000130	113703 	000014 			movb	14,	r3	;
     41					;------------------------------------------------
     42	000134				dc0:				;
     43	000134					.push	r4		;
     44	000136	006304 				asl	r4		;
     45	000140	005404 				neg	r4		;
     46	000142	062704 	142440 			add	#$$map+32.,r4	;
     47					;................................
     48	000146	005014 				clr	(r4)		;
     49	000150	005064 	000050 			clr	$$len*1(r4)	;
     50	000154	005064 	000120 			clr	$$len*2(r4)	;
     51	000160	005064 	000170 			clr	$$len*3(r4)	;
     52	000164	005064 	000240 			clr	$$len*4(r4)	;
     53	000170	005064 	000310 			clr	$$len*5(r4)	;
     54	000174	005064 	000360 			clr	$$len*6(r4)	;
     55					;................................
     56	000200	032703 	000100 			bit	#100,	r3	;
     57	000204	001402 				beq	10$		;
.MAIN.	MACRO V05.06R Friday 30-Nov-18 09:49  Page 4-1
Common definitions for bios monitor

     58	000206	012714 	177740 			mov	#^B1111111111100000,	       (r4)
     59	000212				10$:				;
     60	000212	032703 	000002 			bit	#2,	r3	;
     61	000216	001403 				beq	20$		;
     62	000220	012764 	037770 	000170 		mov	#^B0011111111111000,	$$len*3(r4)
     63	000226				20$:				;
     64	000226	032703 	000040 			bit	#40,	r3	;
     65	000232	001403 				beq	30$		;
     66	000234	012764 	007776 	000360 		mov	#^B0000111111111110,	$$len*6(r4)
     67	000242				30$:				;
     68	000242	032703 	000004 			bit	#4,	r3	;
     69	000246	001403 				beq	40$		;
     70	000250	052764 	060000 	000360 		bis	#^B0110000000000000,	$$len*6(r4)
     71	000256				40$:				;
     72	000256	032703 	000010 			bit	#10,	r3	;
     73	000262	001413 				beq	50$		;
     74	000264	052714 	000140 			bis	#^B0000000001100000,	       (r4)
     75	000270	052764 	000140 	000050 		bis	#^B0000000001100000,	$$len*1(r4)
     76	000276	052764 	000060 	000120 		bis	#^B0000000000110000,	$$len*2(r4)
     77	000304	052764 	000030 	000170 		bis	#^B0000000000011000,	$$len*3(r4)
     78	000312				50$:				;
     79	000312	032703 	000200 			bit	#200,	r3	;
     80	000316	001413 				beq	60$		;
     81	000320	052714 	140000 			bis	#^B1100000000000000,	       (r4)
     82	000324	052764 	140000 	000050 		bis	#^B1100000000000000,	$$len*1(r4)
     83	000332	052764 	060000 	000120 		bis	#^B0110000000000000,	$$len*2(r4)
     84	000340	052764 	030000 	000170 		bis	#^B0011000000000000,	$$len*3(r4)
     85	000346				60$:				;
     86	000346	032703 	000020 			bit	#20,	r3	;
     87	000352	001414 				beq	70$		;
     88	000354	052764 	000030 	000170 		bis	#^B0000000000011000,	$$len*3(r4)
     89	000362	052764 	000030 	000240 		bis	#^B0000000000011000,	$$len*4(r4)
     90	000370	052764 	000014 	000310 		bis	#^B0000000000001100,	$$len*5(r4)
     91	000376	052764 	000006 	000360 		bis	#^B0000000000000110,	$$len*6(r4)
     92	000404				70$:				;
     93	000404	032703 	000001 			bit	#1,	r3	;
     94	000410	001414 				beq	80$		;
     95	000412	052764 	030000 	000170 		bis	#^B0011000000000000,	$$len*3(r4)
     96	000420	052764 	030000 	000240 		bis	#^B0011000000000000,	$$len*4(r4)
     97	000426	052764 	014000 	000310 		bis	#^B0001100000000000,	$$len*5(r4)
     98	000434	052764 	006000 	000360 		bis	#^B0000110000000000,	$$len*6(r4)
     99	000442				80$:				;
    100	000442					.pop	r4		;
    101	000444	000207 				return			;
    102					;------------------------------------------------
    103	000446	010504 			dc1:	mov	r5,	r4	;
    104	000450	010503 				mov	r5,	r3	;
    105	000452	105004 				clrb	r4		;
    106	000454	000304 				swab	r4		;
    107	000456	004737 	000134'			call	dc0		;
    108	000462	000137 	000000G		k.exit: jmp     exit		;
    109					;------------------------------------------------
    110	000466				dc2:	mfus			;
    111	000470	010004 				mov	r0,	r4	;
    112	000472	042704 	177760 			bic	#^c17,	r4	;
    113	000476	010002 				mov	r0,	r2	;
    114	000500	072227 	177774 			ash	#-4,	r2	;
.MAIN.	MACRO V05.06R Friday 30-Nov-18 09:49  Page 4-2
Common definitions for bios monitor

    115	000504	042702 	177760 			bic	#^c17,	r2	;
    116	000510	001002 				bne	10$		;
    117	000512	012702 	000020 			mov	#16.,	r2	;
    118					;................................
    119	000516	000300 			10$:	swab	r0		;
    120	000520	010003 				mov	r0,	r3	;
    121	000522	004737 	000134'			call	dc0		;
    122	000526	005204 				inc	r4		;
    123	000530	005302 				dec	r2		;
    124	000532	001753 				beq	k.exit		;
    125	000534					mfus			;
    126	000536	010003 				mov	r0,	r3	;
    127	000540	004737 	000134'			call	dc0		;
    128	000544	005204 				inc	r4		;
    129	000546	077215 				sob	r2,	10$	;
    130	000550	000744 				br	k.exit		;
    131					;------------------------------------------------
    132	000552				dc3:	mfus			;
    133	000554	010003 				mov	r0,	r3	;
    134	000556					mfus			;
    135	000560	004737 	000566'			call	kdc3		;
    136	000564	000736 				br	k.exit		;
    137					;------------------------------------------------
    138	000566	010001 			kdc3::	mov	r0,	r1	;
    139	000570	010004 				mov	r0,	r4	;
    140	000572	042704 	177760 			bic	#^c17,  r4	;
    141	000576	105001 				clrb	r1		;
    142	000600	000301 				swab	r1		;
    143	000602	072027 	177774 			ash	#-4,	r0	;
    144	000606	042700 	177760 			bic	#^c17,	r0	;
    145	000612	001002 				bne	10$		;
    146	000614	012700 	000020 			mov	#16.,	r0	;
    147					;................................
    148	000620				10$:				;
    149	000620	001404 				beq	15$		;
    150	000622	005002 				clr	r2		;
    151	000624	071201 				div	r1,	r2	;
    152	000626	116303 	000000G		    	movb	dctbl(r3),r3	;
    153	000632	004737 	000134'		15$:	call	dc0		;
    154	000636	005204 				inc	r4		;
    155	000640	010203 			     	mov	r2,	r3	;
    156	000642	077012 				sob	r0,	10$	;
    157	000644	000207 			99$:	return			;
    158					;--------------------------------
    159	000646				$$kdc3:: .push   <r1,r2,r3,r4>
    160	000656	010003 				mov	r0,	r3
    161	000660	012500 				mov	(r5)+,  r0
    162	000662	004737 	000566'			call	kdc3
    163	000666					.pop	<r4,r3,r2,r1>
    164	000676	000205 				rts 	r5
    165		000001 			.end
Errors detected:  0

*** Assembler statistics


Work  file  reads: 0
.MAIN.	MACRO V05.06R Friday 30-Nov-18 09:49  Page 4-3
Common definitions for bios monitor

Work  file writes: 0
Size of work file: 9792 Words  ( 39 Pages)
Size of core pool: 15872 Words  ( 62 Pages)
Operating  system: RT-11

Elapsed time: 00:00:00.07
DK:P16VDC,DK:P16VDC=DK:P16,DK:P16VDC
